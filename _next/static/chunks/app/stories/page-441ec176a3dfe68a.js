(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return n}});let l=r(8229),s=r(8883),a=r(3063),i=l._(r(1193));function n(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=a.Image},5229:(e,t,r)=>{Promise.resolve().then(r.bind(r,8193))},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var l=r(1469),s=r.n(l)},8193:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var l=r(5155),s=r(2115);function a(e){let{filterFields:t,sortFields:r,filterValues:s,filterBy:a,filterValue:i,sortBy:n,sortDirection:o,onFilterChange:d,onSortChange:c}=e,x=e=>{a===e?d("",""):d(e,"")},m=e=>{d(a,e)},u=e=>{n===e?c(e,"asc"===o?"desc":"asc"):c(e,"asc")};return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700 mr-2",children:"Filter:"}),t.map(e=>(0,l.jsx)("button",{className:"px-4 py-1 rounded-full border text-sm font-medium transition-colors\n              ".concat(a===e.value?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-indigo-50"),onClick:()=>x(e.value),type:"button",children:e.label},e.value)),a&&s[a]&&s[a].length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2 ml-4",children:s[a].map(e=>(0,l.jsx)("button",{className:"px-3 py-1 rounded-full border text-xs font-medium transition-colors\n                  ".concat(i===e?"bg-indigo-500 text-white border-indigo-500":"bg-white text-gray-700 border-gray-300 hover:bg-indigo-50"),onClick:()=>m(e),type:"button",children:e},e))}),(a||i)&&(0,l.jsx)("button",{className:"ml-4 px-3 py-1 rounded-full bg-gray-200 text-gray-700 text-xs font-medium hover:bg-gray-300 border border-gray-300",onClick:()=>{d("","")},type:"button",children:"Clear Filters"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,l.jsx)("span",{className:"font-semibold text-gray-700 mr-2",children:"Sort:"}),r.map(e=>(0,l.jsxs)("button",{className:"px-4 py-1 rounded-full border text-sm font-medium flex items-center gap-1 transition-colors\n              ".concat(n===e.value?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-indigo-50"),onClick:()=>u(e.value),type:"button",children:[e.label,n===e.value&&(0,l.jsx)("span",{className:"ml-1",children:"asc"===o?"↑":"↓"})]},e.value))]})]})}function i(e){let{currentPage:t,totalPages:r,pageSize:s,onPageChange:a,onPageSizeChange:i}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-4",children:[(0,l.jsx)("button",{onClick:()=>a(t-1),disabled:1===t,className:"px-3 py-1 rounded border disabled:opacity-50",children:"Previous"}),(0,l.jsxs)("span",{className:"px-3 py-1",children:["Page ",t," of ",r]}),(0,l.jsx)("button",{onClick:()=>a(t+1),disabled:t===r,className:"px-3 py-1 rounded border disabled:opacity-50",children:"Next"}),i&&(0,l.jsx)("select",{value:s,onChange:e=>i(Number(e.target.value)),className:"ml-4 px-2 py-1 border rounded",children:[5,10,20,50].map(e=>(0,l.jsxs)("option",{value:e,children:[e," per page"]},e))})]})}var n=r(6874),o=r.n(n),d=r(6766);let c=e=>{var t,r,s;let{story:a}=e,{id:i,Title:n,storytellerName:c,displayQuoteText:x,Status:m,createdTime:u,Created:g,displayShiftName:h}=a,p=a["Story Image"],f=a["File Profile Image (from Storytellers) (from Media)"],b=Array.isArray(p)&&(null==(t=p[0])?void 0:t.url)||Array.isArray(f)&&(null==(r=f[0])?void 0:r.url),y=n||"Empathy Ledger Story",v=(null==(s=a["Story copy"])?void 0:s.substring(0,100))+"...",j=u||g||"",w=x||null,N=Array.isArray(a["Location (from Media)"])?a["Location (from Media)"][0]:null,S=m||null,M=h||null,C=w||v;return(0,l.jsxs)("article",{className:"flex flex-col md:flex-row bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300 ease-in-out w-full border border-gray-200 min-h-[240px] md:min-h-[200px]",children:[(0,l.jsx)("div",{className:"md:w-1/3 flex-shrink-0 relative",children:(0,l.jsx)(o(),{href:"/stories/".concat(i),className:"block w-full h-48 md:h-full group",children:b?(0,l.jsx)(d.default,{src:b,alt:y,width:400,height:300,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-5xl text-indigo-400 font-light opacity-75",children:(n||"S").charAt(0)})})})}),(0,l.jsxs)("div",{className:"flex-1 p-5 md:p-6 flex flex-col justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-2 md:mb-2.5",children:[c&&"Unknown"!==c&&(0,l.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-indigo-700 hover:text-indigo-900 transition-colors uppercase tracking-wider",children:c}),j&&(0,l.jsx)("p",{className:"text-xs text-gray-500 ".concat(c&&"Unknown"!==c?"mt-0.5":""),children:new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,l.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 md:mb-3 leading-tight",children:(0,l.jsx)(o(),{href:"/stories/".concat(i),className:"hover:text-purple-700 transition-colors",children:n||"Untitled Story"})}),C&&(0,l.jsx)("p",{className:"mb-3 md:mb-4 text-sm ".concat(w?"italic text-gray-700 border-l-4 border-purple-300 pl-3 py-1 bg-purple-50/50 rounded-r-md":"text-gray-600 line-clamp-3"),children:w?'"'.concat(C,'"'):C}),(S||N||M)&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3 md:mb-4 items-center text-xs",children:[S&&(0,l.jsx)("span",{className:"px-2.5 py-1 font-medium rounded-full \n                    ".concat("Published"===S?"bg-green-100 text-green-800":"Draft"===S?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700","\n                  "),children:S}),N&&(0,l.jsxs)("span",{className:"flex items-center px-2.5 py-1 font-medium text-teal-800 bg-teal-100 rounded-full",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),N]}),M&&(0,l.jsx)("span",{className:"flex items-center px-2.5 py-1 font-medium text-blue-800 bg-blue-100 rounded-full",children:M})]})]}),(0,l.jsx)("div",{className:"mt-auto pt-3 md:pt-4",children:(0,l.jsxs)(o(),{href:"/stories/".concat(i),className:"group inline-flex items-center text-sm font-semibold text-indigo-600 hover:text-indigo-800 transition-colors",children:["Read Full Story",(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 transition-transform duration-200 group-hover:translate-x-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]})},x=e=>{let{stories:t}=e;return t&&0!==t.length?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"flex justify-end mb-4",children:(0,l.jsx)(o(),{href:"/stories/new",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Share Your Story"})}),(0,l.jsx)("ul",{className:"space-y-4",children:t.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(c,{story:e})},e.id))})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"No stories found."}),(0,l.jsx)(o(),{href:"/stories/new",className:"inline-block px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Share Your Story"})]})},m=e=>{var t,r,s;let{story:a}=e,{id:i,Title:n,storytellerName:c,displayQuoteText:x,Status:m,createdTime:u,Created:g,displayShiftName:h}=a,p=Array.isArray(a["Story Image"])&&(null==(t=a["Story Image"][0])?void 0:t.url)||Array.isArray(a["File Profile Image (from Storytellers) (from Media)"])&&(null==(r=a["File Profile Image (from Storytellers) (from Media)"][0])?void 0:r.url),f=n||"Empathy Ledger Story",b=(null==(s=a["Story copy"])?void 0:s.substring(0,100))+"...",y=u||g||"",v=x||null,j=Array.isArray(a["Location (from Media)"])?a["Location (from Media)"][0]:null,w=m||null,N=h||null,S=v||b;return(0,l.jsxs)("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300 ease-in-out flex flex-col h-full border border-gray-200",children:[(0,l.jsx)(o(),{href:"/stories/".concat(i),className:"block group",children:(0,l.jsxs)("div",{className:"aspect-video w-full overflow-hidden",children:[" ",p?(0,l.jsx)(d.default,{src:p,alt:f,width:800,height:450,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-5xl text-indigo-400 font-light opacity-75",children:(n||"S").charAt(0)})})]})}),(0,l.jsxs)("div",{className:"p-5 md:p-6 flex flex-col flex-grow",children:[(0,l.jsxs)("div",{className:"mb-2",children:[c&&"Unknown"!==c&&(0,l.jsx)("p",{className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 transition-colors uppercase tracking-wider mb-0.5",children:c}),y&&(0,l.jsx)("p",{className:"text-xs text-gray-500",children:new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-2 leading-tight flex-grow",children:(0,l.jsx)(o(),{href:"/stories/".concat(i),className:"hover:text-purple-700 transition-colors",children:n||"Untitled Story"})}),S&&(0,l.jsx)("p",{className:"text-sm mb-3 ".concat(v?"italic text-gray-700 border-l-4 border-purple-300 pl-3 py-1 bg-purple-50/50 rounded-r-md":"text-gray-600 line-clamp-2"),children:v?'"'.concat(S,'"'):S}),(w||j||N)&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3 items-center text-xs",children:[w&&(0,l.jsx)("span",{className:"px-2.5 py-1 font-medium rounded-full \n                  ".concat("Published"===w?"bg-green-100 text-green-800":"Draft"===w?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-700","\n                "),children:w}),j&&(0,l.jsxs)("span",{className:"flex items-center px-2.5 py-1 font-medium text-teal-800 bg-teal-100 rounded-full",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),j]}),N&&(0,l.jsx)("span",{className:"flex items-center px-2.5 py-1 font-medium text-blue-800 bg-blue-100 rounded-full",children:N})]}),(0,l.jsx)("div",{className:"mt-auto pt-3",children:(0,l.jsxs)(o(),{href:"/stories/".concat(i),className:"group inline-flex items-center text-sm font-semibold text-indigo-600 hover:text-indigo-800 transition-colors",children:["Read Full Story",(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 transition-transform duration-200 group-hover:translate-x-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]})},u=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),g=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})});function h(e){let{stories:t}=e,[r,a]=(0,s.useState)("list");return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-end items-center mb-4 pr-1",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mr-3",children:"View as:"}),(0,l.jsxs)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>a("list"),className:"px-3 py-1.5 text-sm font-medium rounded-l-md border transition-colors \n              ".concat("list"===r?"bg-indigo-600 text-white border-indigo-600 z-10":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),"aria-pressed":"list"===r,children:[(0,l.jsx)(u,{}),(0,l.jsx)("span",{className:"sr-only",children:"List view"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>a("grid"),className:"px-3 py-1.5 text-sm font-medium rounded-r-md border border-l-0 transition-colors \n              ".concat("grid"===r?"bg-indigo-600 text-white border-indigo-600 z-10":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),"aria-pressed":"grid"===r,children:[(0,l.jsx)(g,{}),(0,l.jsx)("span",{className:"sr-only",children:"Grid view"})]})]})]}),"list"===r?(0,l.jsx)(x,{stories:t}):(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 xl:gap-8",children:t.map(e=>(0,l.jsx)(m,{story:e},e.id))})]})}function p(e){let{stories:t,filterFields:r,sortFields:n,filterValues:o}=e,[d,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[p,f]=(0,s.useState)("asc"),[b,y]=(0,s.useState)(1),[v,j]=(0,s.useState)(10),w=(0,s.useMemo)(()=>{let e=t;return d&&x&&(e=e.filter(e=>{if("Shifts"===d)return e.displayShiftName===x;if("Status"===d)return e.Status===x;if("Location"===d)return Array.isArray(e["Location (from Media)"])&&e["Location (from Media)"].includes(x);if("Month"===d){let t=e.Created||e.createdTime;if(!t)return!1;let r=new Date(t);return"".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"))===x}return!0})),e},[t,d,x]),N=(0,s.useMemo)(()=>{let e=[...w];return u&&e.sort((e,t)=>{let r=e[u],l=t[u];return"string"==typeof r&&"string"==typeof l?"asc"===p?r.localeCompare(l):l.localeCompare(r):0}),e},[w,u,p]),S=Math.ceil(N.length/v),M=(0,s.useMemo)(()=>{let e=(b-1)*v;return N.slice(e,e+v)},[N,b,v]);return(0,l.jsxs)("div",{className:"container mx-auto py-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Stories"}),(0,l.jsx)(a,{filterFields:r,sortFields:n,filterValues:o,filterBy:d,filterValue:x,sortBy:u,sortDirection:p,onFilterChange:(e,t)=>{c(e),m(t),y(1)},onSortChange:(e,t)=>{g(e),f(t)}}),(0,l.jsx)(h,{stories:M}),(0,l.jsx)(i,{currentPage:b,totalPages:S,pageSize:v,onPageChange:e=>y(e),onPageSizeChange:e=>{j(e),y(1)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,63,441,684,358],()=>t(5229)),_N_E=e.O()}]);